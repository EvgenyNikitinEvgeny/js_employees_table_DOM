{"version":3,"sources":["scripts/main.js"],"names":["validField","name","value","length","age","salary","document","body","insertAdjacentHTML","thead","querySelector","tBody","form","forms","select","createRow","nameField","trim","positionField","position","officeField","ageField","formatSalaryField","parseFloat","toLocaleString","showNotification","type","title","text","toUpperCase","notification","classList","add","setTimeout","remove","addEventListener","e","validity","valid","setCustomValidity","innerText","preventDefault","target","reset","item","targetCell","cellIndex","prevValue","normValue","replace","targetInput","querySelectorAll","cloneNode","firstChild","replaceWith","focus","eventKey","key","blur","eventBlur","removeChild","toLowerCase","numb","textContent","special","toggleSwitch","data","children","sort","a","b","contentA","cells","contentB","localeCompare","parseInt","slice","reverse","forEach","elem","i","innerHTML","append","removeAttribute","parentElement"],"mappings":";AAAA,aAgNA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EA9MA,IAAMA,EAAa,CACjBC,KAAM,SAACC,GAAUA,OAAAA,EAAMC,OAAS,GAChCC,IAAK,SAACF,GAAUA,OAAAA,EAAQ,IAAMA,EAAQ,IACtCG,OAAQ,SAACH,GAAcA,MAAAA,IAAAA,OAAAA,KAGzBI,SAASC,KAAKC,mBAAmB,YAAjC,0rCA6CA,IAAMC,EAAQH,SAASI,cAAc,SAC/BC,EAAQL,SAASI,cAAc,SAC/BE,EAAON,SAASO,MAAM,GACtBC,EAASF,EAAKF,cAAc,sBAE5BK,EAAY,WACVC,IAAAA,EAAYJ,EAAKX,KAAKC,MAAMe,OAC5BC,EAAgBN,EAAKO,SAASjB,MAAMe,OACpCG,EAAcN,EAAOZ,MACrBmB,EAAWT,EAAKR,IAAIF,MAEpBoB,EADcC,WAAWX,EAAKP,OAAOH,OACLsB,eAAe,SAErDb,EAAMH,mBAAmB,YAEfQ,yBAAAA,OAAAA,EACAE,qBAAAA,OAAAA,EACAE,qBAAAA,OAAAA,EACAC,qBAAAA,OAAAA,EACCC,sBAAAA,OAAAA,EANX,0BAWF,SAASG,EAAiBC,EAAMC,EAAOC,GACrChB,EAAKJ,mBAAmB,WAEAmB,oFAAAA,OAAAA,EAAME,cACrBD,oBAAAA,OAAAA,EAHT,yBAOME,IAAAA,EAAexB,SAASI,cAAc,iBAE5CoB,EAAaC,UAAUC,IAAIN,GAE3BO,WAAW,WACTH,EAAaI,UACZ,KAGLtB,EAAKX,KAAKkC,iBAAiB,SAAU,SAAAC,GAC9BxB,EAAKX,KAAKoC,SAASC,OACtB1B,EAAKX,KAAKsC,kBACR,oDAKN3B,EAAKX,KAAKkC,iBAAiB,SAAU,SAAAC,IAC9BxB,EAAKX,KAAKoC,SAASC,OAAS1B,EAAKX,KAAKuC,UAAUvB,OAAOd,OAAS,GACnEsB,EACE,QAAS,iBAAkB,8CAKjCb,EAAKR,IAAI+B,iBAAiB,SAAU,SAAAC,GAC7BxB,EAAKR,IAAIiC,SAASC,OACrBb,EACE,QAAS,sBAAuB,0CAKtCb,EAAKuB,iBAAiB,SAAU,SAACC,GAC/BA,EAAEK,iBACF1B,IAEAU,EACE,UAAW,UAAW,mDAExBW,EAAEM,OAAOC,UAGXhC,EAAMwB,iBAAiB,WAAY,SAACC,GAC5BQ,IAAAA,EAAOR,EAAEM,OACTG,EAAaD,EAAKE,UAClBC,EAAYH,EAAKJ,UACjBQ,EAAYD,EAAUE,QAAQ,QAAS,IACvCC,EACFtC,EAAKuC,iBAAiB,aAAaN,GAAYO,WAAU,GAE7DF,EAAYnB,UAAUC,IAAI,cAC1BkB,EAAYhD,MAAQ8C,EACpBJ,EAAKS,WAAWC,YAAYJ,GAC5BA,EAAYK,QAEZL,EAAYf,iBAAiB,WAAY,SAAAqB,GAClB,UAAjBA,EAASC,KACXP,EAAYQ,SAIhBR,EAAYf,iBAAiB,OAAQ,SAAAwB,GAC/B3D,GAAAA,EAAWC,KAAKiD,EAAYhD,QAC3BF,EAAWI,IAAI8C,EAAYhD,OAC3BF,EAAWK,OAAO6C,EAAYhD,QAG7BgD,GAFJN,EAAKgB,YAAYV,GAEbA,EAAYhD,MAAM2D,gBAAkBX,EAAYhD,MAAM2B,eACrDqB,EAAYhD,MAAMC,OAAS,EAAG,CAC3B2D,IAAAA,GAAQZ,EAAYhD,MAE1B0C,EAAKmB,YAAkBD,IAAAA,OAAAA,EAAKtC,eAAe,eAE3CoB,EAAKmB,YAAcb,EAAYhD,WAMnC0C,EAAKgB,YAAYV,GACjBN,EAAKmB,YAAchB,MAIvB,IAoCIiB,EApCAC,GAAe,EAEnBxD,EAAM0B,iBAAiB,QAAS,SAACC,GACzBQ,IACAE,EADOV,EAAEM,OACQI,UAEnBoB,EAAWvD,EAAAA,EAAMwD,UAErBD,EAAKE,KAAK,SAACC,EAAGC,GACNC,IAAAA,EAAWF,EAAEG,MAAM1B,GAAWiB,YAC9BU,EAAWH,EAAEE,MAAM1B,GAAWiB,YAEhCQ,OAAAA,EAAS1C,gBAAkB0C,EAASV,cAC/BU,EAASG,cAAcD,GAG5BE,SAASJ,GACJA,EAAWE,EAEXE,SAASJ,EAASK,MAAM,IAAMD,SAASF,EAASG,MAAM,MAI5DX,IACHC,EAAOA,EAAKW,WAGdZ,GAAgBA,EAEhBC,EAAKY,QAAQ,SAACC,EAAMC,GAClBD,EAAKE,UAAYf,EAAKc,GAAGC,YAG3BtE,EAAMuE,OAANvE,MAAAA,EAAgBuD,EAAAA,MAKlBvD,EAAMwB,iBAAiB,QAAS,SAACC,GAC3B4B,IACFA,EAAQjC,UAAUG,OAAO,UACzB8B,EAAQmB,gBAAgB,UAG1BnB,EAAU5B,EAAEM,OAAO0C,cACnBhD,EAAEM,OAAO0C,cAAcrD,UAAUC,IAAI","file":"main.1e478194.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst validField = {\n  name: (value) => value.length > 4,\n  age: (value) => value > 18 || value < 90,\n  salary: (value) => `$${value}`,\n};\n\ndocument.body.insertAdjacentHTML('beforeend', `\n  <form action=\"/\" method=\"get\" class=\"new-employee-form\">\n    <label>\n      Name:\n      <input\n        name=\"name\"\n        type=\"text\"\n        data-qa=\"name\"\n        minlength=\"4\"\n        pattern=\"[A-Za-zа-яёА-ЯЁ0-9]{4,30}\"\n        required\n      >\n    </label>\n    <label>\n      Position:\n      <input\n      name=\"position\"\n      type=\"text\"\n      data-qa=\"position\"\n      pattern=\"[A-Za-zа-яёА-ЯЁ0-9]{4,30}\"\n      required>\n    </label>\n    <label for=\"office\">\n      Office:\n      <select id=\"office\" data-qa=\"office\" required>\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input name=\"age\" type=\"number\" data-qa=\"age\" required min=\"18\" max=\"90\">\n    </label>\n    <label>\n      Salary:\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\" min=\"1\"required>\n    </label>\n    <button type=\"submit\"> Save to table </button>\n  </form>\n`);\n\nconst thead = document.querySelector('thead');\nconst tBody = document.querySelector('tbody');\nconst form = document.forms[0];\nconst select = form.querySelector('[data-qa=\"office\"]');\n\nconst createRow = (...arr) => {\n  const nameField = form.name.value.trim();\n  const positionField = form.position.value.trim();\n  const officeField = select.value;\n  const ageField = form.age.value;\n  const salaryField = parseFloat(form.salary.value);\n  const formatSalaryField = salaryField.toLocaleString('en-US');\n\n  tBody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${nameField}</td>\n      <td>${positionField}</td>\n      <td>${officeField}</td>\n      <td>${ageField}</td>\n      <td>$${formatSalaryField}</td>\n    </tr>\n  `);\n};\n\nfunction showNotification(type, title, text) {\n  form.insertAdjacentHTML('afterend', `\n    <div class=\"notification\" data-qa=\"notification\">\n      <h1 class=\"title\">${title.toUpperCase()}</h1>\n      <p>${text}</p>\n    </div>\n  `);\n\n  const notification = document.querySelector('.notification');\n\n  notification.classList.add(type);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 5000);\n}\n\nform.name.addEventListener('submit', e => {\n  if (!form.name.validity.valid) {\n    form.name.setCustomValidity(\n      'Error! Less 4 letters are entered in the field'\n    );\n  }\n});\n\nform.name.addEventListener('change', e => {\n  if (!form.name.validity.valid && form.name.innerText.trim().length < 4) {\n    showNotification(\n      'error', 'Incorrect name', 'Name length should be at least 4 letters'\n    );\n  }\n});\n\nform.age.addEventListener('change', e => {\n  if (!form.age.validity.valid) {\n    showNotification(\n      'error', 'Enter a correct age', 'Your age must be from 18 to 90 years'\n    );\n  }\n});\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n  createRow();\n\n  showNotification(\n    'success', 'Good!!!', 'New employee is successfully added to the table'\n  );\n  e.target.reset();\n});\n\ntBody.addEventListener('dblclick', (e) => {\n  const item = e.target;\n  const targetCell = item.cellIndex;\n  const prevValue = item.innerText;\n  const normValue = prevValue.replace(/[$,]/g, '');\n  const targetInput\n    = form.querySelectorAll('[data-qa]')[targetCell].cloneNode(true);\n\n  targetInput.classList.add('cell-input');\n  targetInput.value = normValue;\n  item.firstChild.replaceWith(targetInput);\n  targetInput.focus();\n\n  targetInput.addEventListener('keypress', eventKey => {\n    if (eventKey.key === 'Enter') {\n      targetInput.blur();\n    }\n  });\n\n  targetInput.addEventListener('blur', eventBlur => {\n    if (validField.name(targetInput.value)\n      || validField.age(targetInput.value\n      || validField.salary(targetInput.value))) {\n      item.removeChild(targetInput);\n\n      if (targetInput.value.toLowerCase() === targetInput.value.toUpperCase()\n        && targetInput.value.length > 2) {\n        const numb = +targetInput.value;\n\n        item.textContent = `$${numb.toLocaleString('en-US')}`;\n      } else {\n        item.textContent = targetInput.value;\n      }\n\n      return;\n    }\n\n    item.removeChild(targetInput);\n    item.textContent = prevValue;\n  });\n});\n\nlet toggleSwitch = true;\n\nthead.addEventListener('click', (e) => {\n  const item = e.target;\n  const cellIndex = item.cellIndex;\n\n  let data = [...tBody.children];\n\n  data.sort((a, b) => {\n    const contentA = a.cells[cellIndex].textContent;\n    const contentB = b.cells[cellIndex].textContent;\n\n    if (contentA.toUpperCase() !== contentA.toLowerCase()) {\n      return contentA.localeCompare(contentB);\n    }\n\n    if (parseInt(contentA)) {\n      return contentA - contentB;\n    } else {\n      return parseInt(contentA.slice(1)) - parseInt(contentB.slice(1));\n    }\n  });\n\n  if (!toggleSwitch) {\n    data = data.reverse();\n  }\n\n  toggleSwitch = !toggleSwitch;\n\n  data.forEach((elem, i) => {\n    elem.innerHTML = data[i].innerHTML;\n  });\n\n  tBody.append(...data);\n});\n\nlet special;\n\ntBody.addEventListener('click', (e) => {\n  if (special) {\n    special.classList.remove('active');\n    special.removeAttribute('class');\n  }\n\n  special = e.target.parentElement;\n  e.target.parentElement.classList.add('active');\n});\n"]}